Здравствуйте! В описании к домашнему заданию было сказано про использование VM, но в лекции про экспортеры было упомянуто, что можно использовать докер. Так как докер уже установлен в системе, решил использовать его

1) Сначала нашел CMS - выбрал wordpress (потому что пхп). Чуть-чуть поковырял docker-compose и nginx, и запустилось.
2) Добавил prometheus с дефолтным конфигом и экспортером самого себя, прокинул порт. Проверил доступность экспортера.
3) Добавил node-exporter. Так как дело происходит в докере, то для node-exporter пришлось немного извернуться и прокинуть в контейнер данные о ноде (через вольюмы директории /proc, /sys и т.д.).
4) Добавил mysql-exporter. Перед запуском подключился к базе и создал пользователя exporter. Его креды прописал в конфиге для экспортера - mysql_exporter/.my.cnf.
5) Добавил wordpress-exporter. По непонятной причине вордпресс не отдавал свои метрики, и экспортер падал. Как выяснилось позже, это было из-за того, что в настройках вордпресса не были включены "постоянные ссылки" (permalinks). Как только их включил, проблема ушла, экспортер заработал.
6) Добавил nginx-exporter. Здесь также были проблемы с доступностью метрик. Как оказалось, в настройках nginx нужно прописать stub_status on. После добавления настройки, экспортер заработал.
